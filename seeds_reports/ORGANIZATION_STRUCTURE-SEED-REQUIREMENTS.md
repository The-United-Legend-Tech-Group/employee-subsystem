# Organization Structure Seed Requirements

## 1) Subsystem Overview
Seeds departments, positions (including department head positions), position assignments, and structure change workflow artifacts.

## 2) Collections / Models Seeded
- Department
- Position
- PositionAssignment
- StructureChangeRequest
- StructureApproval
- StructureChangeLog

## 3) REQUIRED Records (The Evaluation Checklist)

### Department (7 active + 1 inactive + test)
| Code | Name | Description | isActive | headPositionId behavior |
| --- | --- | --- | --- | --- |
| HR-001 | Human Resources | Handles all HR related tasks | true | Linked to HR head position (hr manager qualifies) |
| ENG-001 | Engineering | Software Development and Engineering | true | Linked to Department Head - Engineering |
| SALES-001 | Sales | Sales and Marketing | true | Linked to Department Head - Sales |
| LND-001 | Learning and Development | Learning, training, and academic support | true | Linked to Department Head - Learning and Development |
| FIN-001 | Finance | Finance and accounting operations | true | Linked to Department Head - Finance |
| LIB-001 | Library Services | Knowledge center and library operations | true | Linked to Department Head - Library Services |
| OPS-001-INACTIVE | Operations (Inactive) | Inactive operations unit for coverage | false | Linked to Department Head - Operations (Inactive) |
| TEST-001 | Test Department | Seeded test department | true | headPositionId set to POS-TEST-HEAD |

### Position (per department)
| Code | Title | Dept Code | Description | isActive |
| --- | --- | --- | --- | --- |
| POS-HR-MGR | HR Manager | HR-001 | Manager of Human Resources | true |
| POS-HR-GEN | HR Generalist | HR-001 | HR operations and employee relations | true |
| POS-SWE | Software Engineer | ENG-001 | Full Stack Developer | true |
| POS-SENIOR-SWE | Senior Software Engineer | ENG-001 | Leads software engineering initiatives | true |
| POS-QA-ENG | QA Engineer | ENG-001 | Quality assurance and testing | true |
| POS-SALES-REP | Sales Representative | SALES-001 | Sales Representative | true |
| POS-SALES-LEAD | Sales Lead | SALES-001 | Leads sales team for regional accounts | true |
| POS-TA | TA | LND-001 | Teaching Assistant supporting learning programs | true |
| POS-LA | LA | LND-001 | Learning Advisor guiding training plans | true |
| POS-ACC | Accountant | FIN-001 | Handles accounting operations and reporting | true |
| POS-LIB | Librarian | LIB-001 | Manages library resources and circulation | true |
| POS-OPS-INACTIVE | Operations Analyst (Inactive) | OPS-001-INACTIVE | Inactive position for coverage | false |
| POS-TEST-HEAD | Test Dept Head | TEST-001 | Head of Test Department | true |
| POS-TEST-EMP | Test Dept Employee | TEST-001 | Employee in Test Department | true |
| POS-<dept>-HEAD (auto per dept if no head title) | Department Head - <Dept Name> | matches dept | Created when no head-like title exists; active | true |

### PositionAssignment (initial)
| Employee | Position | Department | startDate |
| --- | --- | --- | --- |
| alice@company.com | POS-HR-MGR | HR-001 | 2020-01-01 |
| bob@company.com | POS-ACC | FIN-001 | 2021-05-15 |
| charlie@company.com | POS-SALES-REP | SALES-001 | 2022-03-10 |
| diana@company.com | POS-SENIOR-SWE | ENG-001 | 2019-07-01 |
| george@company.com | POS-HR-GEN | HR-001 | 2010-02-15 |
| tariq.ta@company.com | POS-TA | LND-001 | 2025-04-05 |
| laila.la@company.com | POS-LA | LND-001 | 2025-04-10 |
| paula@company.com | POS-ACC | FIN-001 | 2024-12-01 |
| amir.accountant@company.com | POS-ACC | FIN-001 | 2025-04-15 |
| salma.librarian@company.com | POS-LIB | LIB-001 | 2025-04-20 |
| tess.headley@company.com | POS-TEST-HEAD | TEST-001 | 2025-05-01 (upsert) |
| evan.tester@company.com | POS-TEST-EMP | TEST-001 | 2025-05-02 (upsert) |

### Structure Change Workflow
| Model | Required record key fields |
| --- | --- |
| StructureChangeRequest | requestNumber SCR-2025-001; type NEW_POSITION; targetDepartment SALES-001; requestedBy/submittedBy alice; status SUBMITTED; details "Create a Sales Lead position" |
| StructureApproval | changeRequestId -> SCR-2025-001; approverEmployeeId bob; decision PENDING; comments "Pending finance alignment" |
| StructureChangeLog | action CREATED; entityType Position; entityId POS-SALES-REP; performedBy alice; summary "Requested upgrade for Sales Representative track"; beforeSnapshot title Sales Representative dept SALES-001; afterSnapshot title Sales Lead dept SALES-001 |

### Head Position Behavior
- For every department, headPositionId is ensured. If none existed, a new position POS-<dept.code>-HEAD titled "Department Head - <Dept Name>" is created and assigned.

## 4) Fields Without Seed Values
- All schemas: `_id`, timestamps (`createdAt`, `updatedAt`) are auto-generated by MongoDB/Mongoose.
- StructureChangeRequest/Approval/Log may have additional optional fields not set; they remain default/undefined.

## 5) Enums & Status Coverage
- StructureRequestType: NEW_POSITION used.
- StructureRequestStatus: SUBMITTED used.
- ApprovalDecision: PENDING used.
- ChangeLogAction: CREATED used.

## 6) Validation Notes
- Departments and positions are created before assignments; foreign keys must resolve.
- Codes and titles are unique as seeded (e.g., department.code, position.code, StructureChangeRequest.requestNumber).
- headPositionId must point to the head position for each department.

## 7) Minimum Acceptance Checklist
- Department collection contains exactly the codes listed (HR-001, ENG-001, SALES-001, LND-001, FIN-001, LIB-001, OPS-001-INACTIVE, TEST-001) with correct names/active flags.
- Position collection contains all codes listed, linked to correct departments with titles/descriptions.
- PositionAssignment contains the twelve assignments listed with correct employee emails, positions, departments, and start dates.
- StructureChangeRequest/Approval/Log contain the single workflow entries described, linked together.
- Departments have headPositionId set to a head position in their department; head positions created where missing.
